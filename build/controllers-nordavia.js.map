{"version":3,"sources":["controllers-nordavia.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","app","angular","directive","restrict","link","$scope","$element","click","$label","$","attr","2","onlinePaymentRestrictController","$location","handleAllowPaymentClick","$parent","vm","showPaymentFrame","restrictPayment","this","RESTRICT_REDIRECT_PAYMENT_FORMS","orderInfo","allowPayment","$watch","bind","newVal","paymentForm","paymentform","_","contains","test","location","href","retryPayment","controllerAs","bindToController","controller","scope","3","./directives/checkAgreeByDefault","./directives/onlinePaymentRestrict"],"mappings":"CAAA,WAAY,QAASA,GAAEC,EAAEC,EAAEC,GAAG,QAASC,GAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,GAAIE,GAAE,kBAAmBC,UAASA,OAAQ,KAAIF,GAAGC,EAAE,MAAOA,GAAEF,GAAE,EAAI,IAAGI,EAAE,MAAOA,GAAEJ,GAAE,EAAI,IAAIK,GAAE,GAAIC,OAAM,uBAAuBN,EAAE,IAAK,MAAMK,GAAEE,KAAK,mBAAmBF,EAAE,GAAIG,GAAEX,EAAEG,IAAIS,WAAYb,GAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAG,GAAIE,GAAED,EAAEI,GAAG,GAAGL,EAAG,OAAOI,GAAEF,GAAGF,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,MAAOD,GAAEG,GAAGS,QAAQ,IAAI,GAAIL,GAAE,kBAAmBD,UAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,GAAI,OAAOD,GAAE,MAAOJ,OAAOiB,GAAG,SAAST,EAAQU,EAAOJ,GACxe,YACA,IAAIK,GAAMC,QAAQF,OAAO,MAEzBC,GAAIE,UAAU,sBAAuB,WACjC,OACIC,SAAU,IACVC,KAAM,SAAUC,EAAQC,GACpBA,EAASC,OAET,IAAIC,GAASC,EAAE,wBACfD,GAAOE,KAAK,MAAO,aAOzBC,GAAG,SAAStB,EAAQU,EAAOJ,GACjC,YAeA,SAASiB,GAAgCP,EAAQQ,GA+B7C,QAASC,KACLT,EAAOU,QAAQC,GAAGC,kBAAmB,EACrCD,EAAGE,iBAAkB,EA/BzB,GAAIF,GAAKG,IAGTH,GAAGI,iCAAmC,YAAa,mBAAoB,gBACvEJ,EAAGE,iBAAkB,EACrBF,EAAGK,UAAYhB,EAAOU,QAAQC,GAAGK,UACjCL,EAAGC,iBAAmBZ,EAAOU,QAAQC,GAAGC,iBACxCD,EAAGM,aAAeR,EAGlBT,EAAOkB,OAAOtB,QAAQuB,KAAKL,KAAM,WAC7B,MAAOH,GAAGC,mBACV,SAAUQ,GAEV,GAAIC,GAAcV,EAAGK,UAAUM,WAE3BC,GAAEC,SAASb,EAAGI,gCAAiCM,KAC/CrB,EAAOU,QAAQC,GAAGC,kBAAmB,EACrCD,EAAGE,iBAAkB,EAGjB,kBAAkBY,KAAKC,SAASC,OAChC3B,EAAOU,QAAQC,GAAGiB,kBAtClC,GAAIjC,GAAMC,QAAQF,OAAO,MAGzBC,GAAIE,UAAU,wBAAyB,WACnC,OACIgC,aAAc,kBACdC,kBAAkB,EAClBC,WAAY,kCACZC,OAAO,KAIfrC,EAAIoC,WAAW,mCAAoC,SAAU,YAAaxB,SAsCpE0B,GAAG,SAASjD,EAAQU,EAAOJ,GACjC,YACAN,GAAQ,sCACRA,EAAQ,sCACLkD,mCAAmC,EAAEC,qCAAqC,SAAS","file":"controllers-nordavia.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\nvar app = angular.module('app');\n\napp.directive('checkAgreeByDefault', function () {\n    return {\n        restrict: 'A',\n        link: function ($scope, $element) {\n            $element.click();\n\n            var $label = $('label[for=\"iconfirm\"]');\n            $label.attr('for', '');\n\n        }\n    }\n});\n\n\n},{}],2:[function(require,module,exports){\n\"use strict\";\nvar app = angular.module('app');\n\n\napp.directive('onlinePaymentRestrict', function () {\n    return {\n        controllerAs: 'restrictPayment',\n        bindToController: true,\n        controller: 'onlinePaymentRestrictController',\n        scope: false\n    }\n});\n\napp.controller('onlinePaymentRestrictController', ['$scope', '$location', onlinePaymentRestrictController]);\n\nfunction onlinePaymentRestrictController($scope, $location) {\n\n    var vm = this;\n\n\n    vm.RESTRICT_REDIRECT_PAYMENT_FORMS = ['e-banking', 'electronic_money', 'plastic_card'];\n    vm.restrictPayment = false;\n    vm.orderInfo = $scope.$parent.vm.orderInfo;\n    vm.showPaymentFrame = $scope.$parent.vm.showPaymentFrame;\n    vm.allowPayment = handleAllowPaymentClick;\n\n\n    $scope.$watch(angular.bind(this, function () {\n        return vm.showPaymentFrame;\n    }), function (newVal) {\n\n        var paymentForm = vm.orderInfo.paymentform;\n\n        if (_.contains(vm.RESTRICT_REDIRECT_PAYMENT_FORMS, paymentForm)) {\n            $scope.$parent.vm.showPaymentFrame = false;\n            vm.restrictPayment = true;\n\n            // console.log(location.href.(/\\?result-failed/));\n            if (/\\?result=failed/.test(location.href)) {\n                $scope.$parent.vm.retryPayment();\n            }\n\n        }\n\n    });\n\n    function handleAllowPaymentClick() {\n        $scope.$parent.vm.showPaymentFrame = true;\n        vm.restrictPayment = false;\n    }\n}\n},{}],3:[function(require,module,exports){\n\"use strict\";\nrequire('./directives/onlinePaymentRestrict');\nrequire('./directives/checkAgreeByDefault');\n},{\"./directives/checkAgreeByDefault\":1,\"./directives/onlinePaymentRestrict\":2}]},{},[3]);\n"]}